<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.oriental.manage.dao.base.UserInfoMapper">
    <resultMap id="BaseResultMap" type="com.oriental.manage.pojo.base.UserInfo"
               extends="BaseMapper.BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="USER_ID" property="userId" jdbcType="VARCHAR"/>
        <result column="USER_TYPE" property="userType" jdbcType="VARCHAR"/>
        <result column="USER_NAME" property="userName" jdbcType="VARCHAR"/>
        <result column="USER_PWD" property="userPwd" jdbcType="VARCHAR"/>
        <result column="COMPANY_CODE" property="companyCode" jdbcType="VARCHAR"/>
        <result column="DEPT_CODE" property="deptCode" jdbcType="VARCHAR"/>
        <result column="USER_TELEPHONE" property="userTelephone" jdbcType="VARCHAR"/>
        <result column="USER_MOBILE" property="userMobile" jdbcType="VARCHAR"/>
        <result column="USER_EMAIL" property="userEmail" jdbcType="VARCHAR"/>
        <result column="USER_STATUS" property="userStatus" jdbcType="VARCHAR"/>
        <result column="STATUS_LAST_UPD" property="statusLastUpd" jdbcType="TIMESTAMP"/>
        <result column="HANDLER" property="handler" jdbcType="VARCHAR"/>
        <result column="PWD_LAST_UPD" property="pwdLastUpd" jdbcType="TIMESTAMP"/>
        <result column="PWD_QUESTION" property="pwdQuestion" jdbcType="VARCHAR"/>
        <result column="PWD_ANSWER" property="pwdAnswer" jdbcType="VARCHAR"/>
        <result column="READONLY_FLAG" property="readonlyFlag" jdbcType="VARCHAR"/>
        <result column="CREATE_TIME" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="LAST_UPD_TIME" property="lastUpdTime" jdbcType="TIMESTAMP"/>
        <result column="USER_FULL_NAME" property="userFullName" jdbcType="VARCHAR"/>
        <result column="SIGN_IMG_URL" property="signImgUrl" jdbcType="VARCHAR"/>
        <result column="CREATOR" property="creator" jdbcType="VARCHAR"/>
        <result column="MODIFIER" property="modifier" jdbcType="VARCHAR"/>
        <result column="SIGN_FLAG" property="signFlag" jdbcType="VARCHAR"/>
        <result column="LAST_LOGIN_TIME" property="lastLoginTime" jdbcType="TIMESTAMP"/>
        <result column="AUDITOR" property="auditor" jdbcType="VARCHAR"/>
        <result column="AUDIT_DATE" property="auditDate" jdbcType="TIMESTAMP"/>
        <result column="LAST_LOGIN_IP_ADDRESS" property="lastLoginIpAddress" jdbcType="VARCHAR"/>
    </resultMap>

    <resultMap id="ResultMapWithRole" type="com.oriental.manage.pojo.base.UserInfo"
               extends="BaseResultMap">
        <collection property="userRoles" ofType="com.oriental.manage.pojo.base.UserRole"
                    resultMap="com.oriental.manage.dao.base.UserRoleMapper.BaseResultMap"/>
    </resultMap>

    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        USER_ID, USER_TYPE, USER_NAME, USER_PWD, COMPANY_CODE, DEPT_CODE, USER_TELEPHONE,
        USER_MOBILE, USER_EMAIL, USER_STATUS, STATUS_LAST_UPD, HANDLER, PWD_LAST_UPD, PWD_QUESTION,
        PWD_ANSWER, READONLY_FLAG, CREATE_TIME, LAST_UPD_TIME, USER_FULL_NAME, SIGN_IMG_URL,
        CREATOR, MODIFIER, SIGN_FLAG, LAST_LOGIN_TIME, AUDITOR, AUDIT_DATE, LAST_LOGIN_IP_ADDRESS
    </sql>

    <sql id="condition">
        <if test="userId != null and userId != ''">
            AND info.USER_ID = #{userId,jdbcType=VARCHAR}
        </if>
        <if test="userType != null and userType != ''">
            AND info.USER_TYPE = #{userType,jdbcType=VARCHAR}
        </if>
        <if test="userName != null and userName != ''">
            AND info.USER_NAME = #{userName,jdbcType=VARCHAR}
        </if>
        <if test="userPwd != null and userPwd != ''">
            AND info.USER_PWD = #{userPwd,jdbcType=VARCHAR}
        </if>
        <if test="companyCode != null and companyCode != ''">
            AND info.COMPANY_CODE = #{companyCode,jdbcType=VARCHAR}
        </if>
        <if test="deptCode != null and deptCode != ''">
            AND info.DEPT_CODE = #{deptCode,jdbcType=VARCHAR}
        </if>
        <if test="userTelephone != null and userTelephone != ''">
            AND info.USER_TELEPHONE = #{userTelephone,jdbcType=VARCHAR}
        </if>
        <if test="userMobile != null and userMobile != ''">
            AND info.USER_MOBILE = #{userMobile,jdbcType=VARCHAR}
        </if>
        <if test="userEmail != null and userEmail != ''">
            AND info.USER_EMAIL = #{userEmail,jdbcType=VARCHAR}
        </if>
        <if test="userStatus != null and userStatus != ''">
            AND info.USER_STATUS = #{userStatus,jdbcType=VARCHAR}
        </if>
        <if test="statusLastUpd != null and statusLastUpd != ''">
            AND info.STATUS_LAST_UPD = #{statusLastUpd,jdbcType=TIMESTAMP}
        </if>
        <if test="handler != null and handler != ''">
            AND info.HANDLER = #{handler,jdbcType=VARCHAR}
        </if>
        <if test="pwdLastUpd != null and pwdLastUpd != ''">
            AND info.PWD_LAST_UPD = #{pwdLastUpd,jdbcType=TIMESTAMP}
        </if>
        <if test="pwdQuestion != null and pwdQuestion != ''">
            AND info.PWD_QUESTION = #{pwdQuestion,jdbcType=VARCHAR}
        </if>
        <if test="pwdAnswer != null and pwdAnswer != ''">
            AND info.PWD_ANSWER = #{pwdAnswer,jdbcType=VARCHAR}
        </if>
        <if test="readonlyFlag != null and readonlyFlag != ''">
            AND info.READONLY_FLAG = #{readonlyFlag,jdbcType=VARCHAR}
        </if>
        <if test="createTime != null and createTime != ''">
            AND info.CREATE_TIME = #{createTime,jdbcType=TIMESTAMP}
        </if>
        <if test="lastUpdTime != null and lastUpdTime != ''">
            AND info.LAST_UPD_TIME = #{lastUpdTime,jdbcType=TIMESTAMP}
        </if>
        <if test="userFullName != null and userFullName != ''">
            AND info.USER_FULL_NAME = #{userFullName,jdbcType=VARCHAR}
        </if>
        <if test="signImgUrl != null and signImgUrl != ''">
            AND info.SIGN_IMG_URL = #{signImgUrl,jdbcType=VARCHAR}
        </if>
        <if test="creator != null and creator != ''">
            AND info.CREATOR = #{creator,jdbcType=VARCHAR}
        </if>
        <if test="modifier != null and modifier != ''">
            AND info.MODIFIER = #{modifier,jdbcType=VARCHAR}
        </if>
        <if test="signFlag != null and signFlag != ''">
            AND info.SIGN_FLAG = #{signFlag,jdbcType=VARCHAR}
        </if>
        <if test="lastLoginTime != null and lastLoginTime != ''">
            AND info.LAST_LOGIN_TIME = #{lastLoginTime,jdbcType=TIMESTAMP}
        </if>
        <if test="auditor != null and auditor != ''">
            AND info.AUDITOR = #{auditor,jdbcType=VARCHAR}
        </if>
        <if test="auditDate != null and auditDate != ''">
            AND info.AUDIT_DATE = #{auditDate,jdbcType=TIMESTAMP}
        </if>
    </sql>

    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from t_user_info
        where USER_ID = #{userId,jdbcType=VARCHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from t_user_info
        where USER_ID = #{userId,jdbcType=VARCHAR}
    </delete>
    <insert id="insert" parameterType="com.oriental.manage.pojo.base.UserInfo">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into t_user_info (USER_ID, USER_TYPE, USER_NAME,
        USER_PWD, COMPANY_CODE, DEPT_CODE,
        USER_TELEPHONE, USER_MOBILE, USER_EMAIL,
        USER_STATUS, STATUS_LAST_UPD, HANDLER,
        PWD_LAST_UPD, PWD_QUESTION, PWD_ANSWER,
        READONLY_FLAG, CREATE_TIME, LAST_UPD_TIME,
        USER_FULL_NAME, SIGN_IMG_URL, CREATOR,
        MODIFIER, SIGN_FLAG, LAST_LOGIN_TIME,
        AUDITOR, AUDIT_DATE)
        values (#{userId,jdbcType=VARCHAR}, #{userType,jdbcType=VARCHAR}, #{userName,jdbcType=VARCHAR},
        #{userPwd,jdbcType=VARCHAR}, #{companyCode,jdbcType=VARCHAR}, #{deptCode,jdbcType=VARCHAR},
        #{userTelephone,jdbcType=VARCHAR}, #{userMobile,jdbcType=VARCHAR}, #{userEmail,jdbcType=VARCHAR},
        #{userStatus,jdbcType=VARCHAR}, #{statusLastUpd,jdbcType=TIMESTAMP}, #{handler,jdbcType=VARCHAR},
        #{pwdLastUpd,jdbcType=TIMESTAMP}, #{pwdQuestion,jdbcType=VARCHAR}, #{pwdAnswer,jdbcType=VARCHAR},
        #{readonlyFlag,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, #{lastUpdTime,jdbcType=TIMESTAMP},
        #{userFullName,jdbcType=VARCHAR}, #{signImgUrl,jdbcType=VARCHAR}, #{creator,jdbcType=VARCHAR},
        #{modifier,jdbcType=VARCHAR}, #{signFlag,jdbcType=VARCHAR}, #{lastLoginTime,jdbcType=TIMESTAMP},
        #{auditor,jdbcType=VARCHAR}, #{auditDate,jdbcType=TIMESTAMP})
    </insert>
    <insert id="insertSelective" parameterType="com.oriental.manage.pojo.base.UserInfo">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into t_user_info
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="userId != null">
                USER_ID,
            </if>
            <if test="userType != null">
                USER_TYPE,
            </if>
            <if test="userName != null">
                USER_NAME,
            </if>
            <if test="userPwd != null">
                USER_PWD,
            </if>
            <if test="companyCode != null">
                COMPANY_CODE,
            </if>
            <if test="deptCode != null">
                DEPT_CODE,
            </if>
            <if test="userTelephone != null">
                USER_TELEPHONE,
            </if>
            <if test="userMobile != null">
                USER_MOBILE,
            </if>
            <if test="userEmail != null">
                USER_EMAIL,
            </if>
            <if test="userStatus != null">
                USER_STATUS,
            </if>
            <if test="statusLastUpd != null">
                STATUS_LAST_UPD,
            </if>
            <if test="handler != null">
                HANDLER,
            </if>
            <if test="pwdLastUpd != null">
                PWD_LAST_UPD,
            </if>
            <if test="pwdQuestion != null">
                PWD_QUESTION,
            </if>
            <if test="pwdAnswer != null">
                PWD_ANSWER,
            </if>
            <if test="readonlyFlag != null">
                READONLY_FLAG,
            </if>
            <if test="createTime != null">
                CREATE_TIME,
            </if>
            <if test="lastUpdTime != null">
                LAST_UPD_TIME,
            </if>
            <if test="userFullName != null">
                USER_FULL_NAME,
            </if>
            <if test="signImgUrl != null">
                SIGN_IMG_URL,
            </if>
            <if test="creator != null">
                CREATOR,
            </if>
            <if test="modifier != null">
                MODIFIER,
            </if>
            <if test="signFlag != null">
                SIGN_FLAG,
            </if>
            <if test="lastLoginTime != null">
                LAST_LOGIN_TIME,
            </if>
            <if test="auditor != null">
                AUDITOR,
            </if>
            <if test="auditDate != null">
                AUDIT_DATE,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="userId != null">
                #{userId,jdbcType=VARCHAR},
            </if>
            <if test="userType != null">
                #{userType,jdbcType=VARCHAR},
            </if>
            <if test="userName != null">
                #{userName,jdbcType=VARCHAR},
            </if>
            <if test="userPwd != null">
                #{userPwd,jdbcType=VARCHAR},
            </if>
            <if test="companyCode != null">
                #{companyCode,jdbcType=VARCHAR},
            </if>
            <if test="deptCode != null">
                #{deptCode,jdbcType=VARCHAR},
            </if>
            <if test="userTelephone != null">
                #{userTelephone,jdbcType=VARCHAR},
            </if>
            <if test="userMobile != null">
                #{userMobile,jdbcType=VARCHAR},
            </if>
            <if test="userEmail != null">
                #{userEmail,jdbcType=VARCHAR},
            </if>
            <if test="userStatus != null">
                #{userStatus,jdbcType=VARCHAR},
            </if>
            <if test="statusLastUpd != null">
                #{statusLastUpd,jdbcType=TIMESTAMP},
            </if>
            <if test="handler != null">
                #{handler,jdbcType=VARCHAR},
            </if>
            <if test="pwdLastUpd != null">
                #{pwdLastUpd,jdbcType=TIMESTAMP},
            </if>
            <if test="pwdQuestion != null">
                #{pwdQuestion,jdbcType=VARCHAR},
            </if>
            <if test="pwdAnswer != null">
                #{pwdAnswer,jdbcType=VARCHAR},
            </if>
            <if test="readonlyFlag != null">
                #{readonlyFlag,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="lastUpdTime != null">
                #{lastUpdTime,jdbcType=TIMESTAMP},
            </if>
            <if test="userFullName != null">
                #{userFullName,jdbcType=VARCHAR},
            </if>
            <if test="signImgUrl != null">
                #{signImgUrl,jdbcType=VARCHAR},
            </if>
            <if test="creator != null">
                #{creator,jdbcType=VARCHAR},
            </if>
            <if test="modifier != null">
                #{modifier,jdbcType=VARCHAR},
            </if>
            <if test="signFlag != null">
                #{signFlag,jdbcType=VARCHAR},
            </if>
            <if test="lastLoginTime != null">
                #{lastLoginTime,jdbcType=TIMESTAMP},
            </if>
            <if test="auditor != null">
                #{auditor,jdbcType=VARCHAR},
            </if>
            <if test="auditDate != null">
                #{auditDate,jdbcType=TIMESTAMP},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.oriental.manage.pojo.base.UserInfo">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update t_user_info
        <set>
            <if test="userType != null">
                USER_TYPE = #{userType,jdbcType=VARCHAR},
            </if>
            <if test="userName != null">
                USER_NAME = #{userName,jdbcType=VARCHAR},
            </if>
            <if test="userPwd != null">
                USER_PWD = #{userPwd,jdbcType=VARCHAR},
            </if>
            <if test="companyCode != null">
                COMPANY_CODE = #{companyCode,jdbcType=VARCHAR},
            </if>
            <if test="deptCode != null">
                DEPT_CODE = #{deptCode,jdbcType=VARCHAR},
            </if>
            <if test="userTelephone != null">
                USER_TELEPHONE = #{userTelephone,jdbcType=VARCHAR},
            </if>
            <if test="userMobile != null">
                USER_MOBILE = #{userMobile,jdbcType=VARCHAR},
            </if>
            <if test="userEmail != null">
                USER_EMAIL = #{userEmail,jdbcType=VARCHAR},
            </if>
            <if test="userStatus != null">
                USER_STATUS = #{userStatus,jdbcType=VARCHAR},
            </if>
            <if test="statusLastUpd != null">
                STATUS_LAST_UPD = #{statusLastUpd,jdbcType=TIMESTAMP},
            </if>
            <if test="handler != null">
                HANDLER = #{handler,jdbcType=VARCHAR},
            </if>
            <if test="pwdLastUpd != null">
                PWD_LAST_UPD = #{pwdLastUpd,jdbcType=TIMESTAMP},
            </if>
            <if test="pwdQuestion != null">
                PWD_QUESTION = #{pwdQuestion,jdbcType=VARCHAR},
            </if>
            <if test="pwdAnswer != null">
                PWD_ANSWER = #{pwdAnswer,jdbcType=VARCHAR},
            </if>
            <if test="readonlyFlag != null">
                READONLY_FLAG = #{readonlyFlag,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="lastUpdTime != null">
                LAST_UPD_TIME = #{lastUpdTime,jdbcType=TIMESTAMP},
            </if>
            <if test="userFullName != null">
                USER_FULL_NAME = #{userFullName,jdbcType=VARCHAR},
            </if>
            <if test="signImgUrl != null">
                SIGN_IMG_URL = #{signImgUrl,jdbcType=VARCHAR},
            </if>
            <if test="creator != null">
                CREATOR = #{creator,jdbcType=VARCHAR},
            </if>
            <if test="modifier != null">
                MODIFIER = #{modifier,jdbcType=VARCHAR},
            </if>
            <if test="signFlag != null">
                SIGN_FLAG = #{signFlag,jdbcType=VARCHAR},
            </if>
            <if test="lastLoginTime != null">
                LAST_LOGIN_TIME = #{lastLoginTime,jdbcType=TIMESTAMP},
            </if>
            <if test="auditor != null">
                AUDITOR = #{auditor,jdbcType=VARCHAR},
            </if>
            <if test="auditDate != null">
                AUDIT_DATE = #{auditDate,jdbcType=TIMESTAMP},
            </if>
            <if test="lastLoginIpAddress != null">
                LAST_LOGIN_IP_ADDRESS = #{lastLoginIpAddress,jdbcType=VARCHAR},
            </if>
        </set>
        where USER_ID = #{userId,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.oriental.manage.pojo.base.UserInfo">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update t_user_info
        set USER_TYPE = #{userType,jdbcType=VARCHAR},
        USER_NAME = #{userName,jdbcType=VARCHAR},
        USER_PWD = #{userPwd,jdbcType=VARCHAR},
        COMPANY_CODE = #{companyCode,jdbcType=VARCHAR},
        DEPT_CODE = #{deptCode,jdbcType=VARCHAR},
        USER_TELEPHONE = #{userTelephone,jdbcType=VARCHAR},
        USER_MOBILE = #{userMobile,jdbcType=VARCHAR},
        USER_EMAIL = #{userEmail,jdbcType=VARCHAR},
        USER_STATUS = #{userStatus,jdbcType=VARCHAR},
        STATUS_LAST_UPD = #{statusLastUpd,jdbcType=TIMESTAMP},
        HANDLER = #{handler,jdbcType=VARCHAR},
        PWD_LAST_UPD = #{pwdLastUpd,jdbcType=TIMESTAMP},
        PWD_QUESTION = #{pwdQuestion,jdbcType=VARCHAR},
        PWD_ANSWER = #{pwdAnswer,jdbcType=VARCHAR},
        READONLY_FLAG = #{readonlyFlag,jdbcType=VARCHAR},
        CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
        LAST_UPD_TIME = #{lastUpdTime,jdbcType=TIMESTAMP},
        USER_FULL_NAME = #{userFullName,jdbcType=VARCHAR},
        SIGN_IMG_URL = #{signImgUrl,jdbcType=VARCHAR},
        CREATOR = #{creator,jdbcType=VARCHAR},
        MODIFIER = #{modifier,jdbcType=VARCHAR},
        SIGN_FLAG = #{signFlag,jdbcType=VARCHAR},
        LAST_LOGIN_TIME = #{lastLoginTime,jdbcType=TIMESTAMP},
        AUDITOR = #{auditor,jdbcType=VARCHAR},
        AUDIT_DATE = #{auditDate,jdbcType=TIMESTAMP}
        where USER_ID = #{userId,jdbcType=VARCHAR}
    </update>

    <select id="selectBySelective" resultMap="BaseResultMap" parameterType="com.oriental.manage.pojo.base.UserInfo">
        <include refid="BaseMapper.pageHead"/>
        SELECT
        <include refid="Base_Column_List"/>
        FROM T_USER_INFO info
        WHERE 1 = 1
        <if test="userRoles != null and userRoles.size != 0">
            <foreach collection="userRoles" item="roleItem">
                AND EXISTS(SELECT 1 FROM t_user_role role WHERE info.USER_ID = role.USER_ID AND role.ROLE_ID =
                #{roleItem.roleId,jdbcType=VARCHAR})
            </foreach>
        </if>
        <include refid="condition"/>
        <include refid="BaseMapper.pageFoot"/>
    </select>
    <select id="queryAll" resultMap="BaseResultMap" parameterType="com.oriental.manage.pojo.base.UserInfo">
        SELECT
        <include refid="Base_Column_List"/>
        FROM T_USER_INFO info
        WHERE 1 = 1
        <if test="userRoles != null and userRoles.size != 0">
            <foreach collection="userRoles" item="roleItem">
                AND EXISTS(SELECT 1 FROM t_user_role role WHERE info.USER_ID = role.USER_ID AND role.ROLE_ID =
                #{roleItem.roleId,jdbcType=VARCHAR})
            </foreach>
        </if>
        <include refid="condition"/>
    </select>

    <!--<select id=""-->

    <select id="queryPwdExpired" resultMap="BaseResultMap" parameterType="com.oriental.manage.pojo.base.UserInfo">
        SELECT
        <include refid="Base_Column_List"/>
        FROM T_USER_INFO info
        WHERE 1 = 1
        AND info.USER_STATUS = #{userStatus,jdbcType=VARCHAR}
        AND info.PWD_LAST_UPD &lt;= #{pwdLastUpd,jdbcType=TIMESTAMP}
    </select>

    <select id="queryUserLock" resultMap="BaseResultMap" parameterType="com.oriental.manage.pojo.base.UserInfo">
        SELECT
        <include refid="Base_Column_List"/>
        FROM T_USER_INFO info
        WHERE 1=1
        AND info.USER_STATUS = #{userStatus,jdbcType=VARCHAR}
        AND info.STATUS_LAST_UPD &lt;= #{statusLastUpd,jdbcType=TIMESTAMP}
    </select>
    <select id="checkUserName" resultMap="BaseResultMap">
        SELECT user_name FROM  T_USER_INFO
        where 1 =1
        <if test="userName != null and userName != ''">
            AND USER_NAME = #{userName,jdbcType=VARCHAR}
        </if>

    </select>
</mapper>