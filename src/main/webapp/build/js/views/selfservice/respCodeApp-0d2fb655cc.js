angular.module("myApp").controller("queryCtrl",["$scope","$http","$httpParamSerializerJQLike","$log","OpenService","CheckboxService","CacheService","dateFilter","myConstant",function(e,t,a,n,i,o,c,d,l){function r(){var e=document.getElementById("queryForm");m.url=angular.element(e).prop("action"),m.postData=m.queryBean,m.postData.pageSize=m.pagination.pageSize,m.postData.pageNum=m.pagination.pageNum,t.post(m.url,a(m.postData)).then(function(e){var t=e.data;t.success?(m.pagination=t.object,o.clearChecked()):alert(t.msg)})}function u(){m.queryBean={}}function g(e,t){o.updateChecked(e,t),n.debug(t),n.debug(o.getChecked())}function p(){i({modalTitle:"添加响应码",modalBody:"toAdd",url:"add",item:{},cached:{RESP_CODE:c.getCache("RESP_CODE"),COMANY_CODE:c.getCache("COMANY_CODE")}},function(e){r()},"","myModalNoFooter.html")}function C(){if(1!=o.getCheckedNew(m.pagination.list).length)return void alert("必须勾选一条记录！");var e=o.getCheckedNew(m.pagination.list)[0];e.createTime=null,e.lastUpdTime=null,i({modalTitle:"修改响应码",modalBody:"toUpdate",url:"update",item:e,cached:{RESP_CODE:c.getCache("RESP_CODE"),COMANY_CODE:c.getCache("COMANY_CODE")}},function(){},"","myModalNoFooter.html")}function h(){return 1!=o.getCheckedNew(m.pagination.list).length?void alert("必须勾选一条记录！"):void t.post("delete",a({id:o.getCheckedNew(m.pagination.list)[0].id})).then(function(e){var t=e.data;t.success?(m.pagination.list.splice(m.pagination.list.indexOf(o.getCheckedNew(m.pagination.list)[0]),1),alert("操作成功")):alert("操作失败")},function(e){alert(e.statusText),n.debug("error")})}var m=e.vm={};m.constant=l,m.pagination={pageSize:10,pageNum:1},m.queryBean={},m.queryDetail=r,m.resetForm=u,m.updateChecked=g,m.addItem=p,m.updateItem=C,m.deleteItem=h,m.cached={COMANY_CODE:{},RESP_CODE:{}},c.initCache(m.cached),m.getCache=function(e){return c.getCache(e)}}]);