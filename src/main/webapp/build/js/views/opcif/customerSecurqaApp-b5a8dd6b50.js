angular.module("myApp").controller("queryCtrl",["$scope","$http","$httpParamSerializerJQLike","$log","OpenService","CheckboxService","CacheService","myConstant","dateFilter",function(e,t,a,n,o,i,c,u,d){function r(){var e=document.getElementById("queryForm"),n=e.getAttribute("action");s.postData=s.queryBean,s.postData.pageSize=s.pagination.pageSize,s.postData.pageNum=s.pagination.pageNum,t.post(n,a(s.postData)).then(function(e){var t=e.data;t.success?s.pagination=t.object:alert(t.msg)})}function l(){s.queryBean={}}function p(e,t){i.updateChecked(e,t),n.debug(t),n.debug(i.getChecked())}function g(e){var t=e;o({modalTitle:"查看明细",modalBody:"toDetail",url:"#",item:t,cached:{}},function(e){},"","myModalNoSave.html")}function m(){o({modalTitle:"新增",modalBody:"toAdd",url:"add",item:{},cached:{}},function(e){})}function h(){if(1!=i.getCheckedNew(s.pagination.list).length)return void alert("必须勾选一条记录！");var e=i.getCheckedNew(s.pagination.list)[0],t=angular.copy(e);t.createdAt=null,t.updatedAt=null,o({modalTitle:"修改",modalBody:"toUpdate",url:"update",item:t,cached:{}})}var s=e.vm={};s.constant=u,s.pagination={pageSize:10,pageNum:1},s.queryBean={},s.queryDetail=r,s.resetForm=l,s.updateChecked=p,s.queryCustomerDetail=g,s.addItem=m,s.updateItem=h,s.getCache=function(e){return c.getCache(e)},s.cached={},function(){for(var e in s.cached)c.initCache(e,function(e,t){n.debug(e,t),s.cached[e]=t})}()}]);