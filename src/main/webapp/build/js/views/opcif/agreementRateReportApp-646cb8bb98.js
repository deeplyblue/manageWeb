angular.module("myApp").controller("queryCtrl",function(e,t,a,n,r,u,c,i,o,l){function d(){var e=document.getElementById("queryForm");p.url=e.getAttribute("action"),p.pagination.queryBean=p.queryBean,p.pagination.list=null;var a=p.pagination;t.post(p.url,a,config.jsonHeader).then(function(e){var t=e.data;t.success?p.pagination=t.object:alert(t.msg)})}function s(e,t){var a=new Date(e),n=new Date(t),r=parseInt((n.getTime()-a.getTime())/864e5);return r>30?(alert("日期范围应在一个月之内"),p.queryBean.endDate=l.getToday(),!1):r<0?(alert("日期范围应在一个月之内"),p.queryBean.endDate=l.getToday(),!1):void 0}function g(e,t){var a=new Date(e),n=new Date(t),r=parseInt((n.getTime()-a.getTime())/864e5);return r>30?(alert("日期范围应在一个月之内"),p.queryBean.startDate=l.getYesterday(),!1):r<0?(alert("日期范围应在一个月之内"),p.queryBean.startDate=l.getYesterday(),!1):void 0}function f(){p.queryBean={endDate:l.getToday(),startDate:l.getYesterday()}}function y(e,t){u.updateChecked(e,t),n.debug(t),n.debug(u.getChecked())}function T(e){var t=e;r({modalTitle:"查看明细",modalBody:"toDetail",url:"#",item:t,cached:{ACCOUNT_TYPE:p.cached.ACCOUNT_TYPE,TGB_CUSTOMER_STATUS:p.cached.TGB_CUSTOMER_STATUS,OPCIF_CERTIFICATE_TYPE:p.cached.OPCIF_CERTIFICATE_TYPE,REALNAME_LV:p.cached.REALNAME_LV,CUSTOMER_CRADE:p.cached.CUSTOMER_CRADE}},function(e){},"","myModalNoSave.html")}function m(e){if(confirm("是否确认此操作?")){var r=angular.copy(e);r.authTime=null,r.birthDatetime=null,r.certStartDate=null,r.certExpiryDate=null,t.post(config.ctx+"/cif/customerInfo/freeze",a(r)).then(function(e){var t=e.data;t.success?(alert("操作成功"),d()):alert(t.msg)},function(e){alert(e.statusText),n.debug("error")})}}function D(e){if(confirm("是否确认此操作?")){var r=angular.copy(e);r.authTime=null,r.birthDatetime=null,r.certStartDate=null,r.certExpiryDate=null,t.post(config.ctx+"/cif/customerInfo/defrosting",a(r)).then(function(e){var t=e.data;t.success?(alert("操作成功"),d()):alert(t.msg)},function(e){alert(e.statusText),n.debug("error")})}}function h(e){if(confirm("是否确认此操作?")){var r=angular.copy(e);r.authTime=null,r.birthDatetime=null,r.certStartDate=null,r.certExpiryDate=null,t.post(config.ctx+"/cif/customerInfo/unFreeze",a(r)).then(function(e){var t=e.data;t.success?(alert("操作成功"),p.queryDetail()):alert(t.msg)},function(e){alert(e.statusText),n.debug("error")})}}var p=e.vm={};p.constant=i,p.pagination={pageSize:10,pageNum:1},p.queryBean={},p.queryBean.endDate=l.getToday(),p.queryBean.startDate=l.getYesterday(),p.queryDetail=d,p.resetForm=f,p.updateChecked=y,p.queryCustomerDetail=T,p.freezeOperator=m,p.unFreezeOperator=h,p.defrosting=D,p.checkEndDay=s,p.checkStartDay=g,p.getCache=function(e){return c.getCache(e)},p.cached={},c.initCache(p.cached)});