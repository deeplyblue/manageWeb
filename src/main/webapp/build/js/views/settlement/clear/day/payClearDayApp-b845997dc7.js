angular.module("myApp").controller("queryCtrl",["$scope","$http","$httpParamSerializerJQLike","$log","OpenService","CheckboxService","CacheService","limitToFilter","filterFilter","dateFilter","myConstant","DateCalculateService",function(e,t,a,n,r,c,o,i,u,y,p,g){function d(){var e=document.getElementById("queryForm");s.url=angular.element(e).prop("action"),s.postData=angular.copy(s.queryBean),s.postData.pageSize=s.pagination.pageSize,s.postData.pageNum=s.pagination.pageNum,s.postData.beginDate=y(s.postData.beginDate,"yyyyMMdd"),s.postData.endDate=y(s.postData.endDate,"yyyyMMdd"),t.post(s.url,a(s.postData)).then(function(e){var t=e.data;t.success?(s.pagination=t.object,s.sumObject=t.sumObject,c.clearChecked()):alert(t.msg)})}function l(){s.queryBean={}}var s=e.vm={};s.constant=p,s.downCfg={contentType:"jqLike",date:{beginDate:"yyyyMMdd",endDate:"yyyyMMdd"}},s.pagination={pageSize:10,pageNum:1},s.sumObject={},s.queryBean={},s.queryBean.beginDate=g.getYesterday(),s.queryBean.endDate=g.getYesterday(),s.cached={CONN_CHANNEL:{},PAY_TRANS_CODE:{},COMANY_CODE:{}},o.initCache(s.cached),s.getCache=function(e){return o.getCache(e)},s.getObj=function(e,r){return t.post(config.ctx+"/base/cache/getAll",a({cacheKey:e})).then(function(e){return i(u(e.data.object,r),6)},function(e){n.error("获取数据%s失败",cacheKey)})},s.queryDetail=d,s.resetForm=l}]);