angular.module("myApp").controller("queryCtrl",["$scope","$http","$httpParamSerializerJQLike","$log","OpenService","CheckboxService","CacheService","limitToFilter","filterFilter","dateFilter","myConstant",function(e,t,a,n,o,c,i,r,l,s,u){function d(){var e=document.getElementById("queryForm");g.url=angular.element(e).prop("action"),g.queryBean.clrType="03",g.postData=angular.copy(g.queryBean),g.postData.pageSize=g.pagination.pageSize,g.postData.pageNum=g.pagination.pageNum,g.postData.beginDate=s(g.postData.beginDate,"yyyyMMdd"),g.postData.endDate=s(g.postData.endDate,"yyyyMMdd"),t.post(g.url,a(g.postData)).then(function(e){var t=e.data;t.success?(g.pagination=t.object,g.sumObject=t.sumObject,c.clearChecked()):alert(t.msg)})}function p(){g.queryBean={}}function y(e){var c;g.url=config.ctx+"/settlement/clear/detail/mchntClearDetail/getMchntClearDay",g.postData={},g.postData.orgCode=e.orgCode,g.postData.settleDateBegin=s(e.settleDateBegin,"yyyyMMdd"),g.postData.settleDateEnd=s(e.settleDateEnd,"yyyyMMdd"),t.post(g.url,a(g.postData)).then(function(e){var t=e.data;t.success?(c=t.object.list,o({modalTitle:"商户手续费结算查询-日结",modalBody:"redirectMchntFeeClearDay",url:"allocate",item:{results:c},cached:g.cached},function(e){n.debug(e)},"MchntFeeClearDayModalInstanceCtrl")):alert(t.msg)})}var g=e.vm={};g.constant=u,g.downCfg={contentType:"jqLike",date:{beginDate:"yyyyMMdd",endDate:"yyyyMMdd"}},g.pagination={pageSize:10,pageNum:1},g.sumObject={},g.queryBean={},g.queryBean.beginDate=new Date,g.queryBean.endDate=new Date,g.cached={BANK_INFO:{},BANK_CARD_TYPE:{},CONN_CHANNEL:{},TRANS_CODE_ALL:{},CLR_FLAG:{},CLR_TYPE:{},FEE_CLEAR_TYPE:{},MERCHANT_CODE:{}},i.initCache(g.cached),g.getCache=function(e){return i.getCache(e)},g.getObj=function(e,o){return t.post(config.ctx+"/base/cache/getAll",a({cacheKey:e})).then(function(e){return r(l(e.data.object,o),6)},function(e){n.error("获取数据%s失败",cacheKey)})},g.queryDetail=d,g.resetForm=p,g.redirectMchntClearDay=y}]),angular.module("myApp").controller("MchntFeeClearDayModalInstanceCtrl",["$scope","$uibModalInstance","modalItem","$http","dateFilter","$httpParamSerializerJQLike",function(e,t,a,n,o,c){function i(e,t){return 1==t&&1==l.detailFlag?void(l.detailFlag=!1):(l.detailFlag=!0,l.url=config.ctx+"/settlement/clear/detail/mchntClearDetail/redirectMchntSettleDetail",l.postData={},l.postData.orgCode=e.orgCode,l.postData.settleDate=o(e.settleDate,"yyyyMMdd"),l.postData.pageSize=l.pagination.pageSize,l.postData.pageNum=l.pagination.pageNum,void n.post(l.url,c(l.postData)).then(function(t){var a=t.data;a.success?(l.pagination=a.object,l.sumObject=a.sumObject,l.queryBean=e):alert(a.msg)}))}function r(){i(l.queryBean,!1)}var l=e.vm={modalTitle:"please change the title",modalBody:"#",url:"",item:{}};l=e.vm=a,l.pagination={pageSize:10,pageNum:1},l.sumObject={},e.save=function(){},e.cancel=function(){t.dismiss("cancel")},l.redirectMchntSettleDetail=i,l.queryDetail=r}]);