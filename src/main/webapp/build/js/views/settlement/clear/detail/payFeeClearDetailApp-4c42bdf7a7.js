angular.module("myApp").controller("queryCtrl",["$scope","$http","$httpParamSerializerJQLike","$log","OpenService","CheckboxService","CacheService","limitToFilter","filterFilter","dateFilter","myConstant",function(e,t,a,n,o,i,r,l,c,s,u){function y(){var e=document.getElementById("queryForm");g.url=angular.element(e).prop("action"),g.queryBean.clrType="03",g.postData=angular.copy(g.queryBean),g.postData.pageSize=g.pagination.pageSize,g.postData.pageNum=g.pagination.pageNum,g.postData.beginDate=s(g.postData.beginDate,"yyyyMMdd"),g.postData.endDate=s(g.postData.endDate,"yyyyMMdd"),t.post(g.url,a(g.postData)).then(function(e){var t=e.data;t.success?(g.pagination=t.object,g.sumObject=t.sumObject,i.clearChecked()):alert(t.msg)})}function d(){g.queryBean={}}function p(e){var i;g.url=config.ctx+"/settlement/clear/detail/payClearDetail/getPayClearDay",g.postData={},g.postData.orgCode=e.orgCode,g.postData.settleDateBegin=s(e.settleDateBegin,"yyyyMMdd"),g.postData.settleDateEnd=s(e.settleDateEnd,"yyyyMMdd"),t.post(g.url,a(g.postData)).then(function(e){var t=e.data;t.success?(i=t.object.list,o({modalTitle:"支付手续费结算查询-日结",modalBody:"redirectPayFeeClearDay",url:"allocate",item:{results:i},cached:g.cached},function(e){n.debug(e)},"PayFeeClearDayModalInstanceCtrl")):alert(t.msg)})}var g=e.vm={};g.constant=u,g.downCfg={contentType:"jqLike",date:{beginDate:"yyyyMMdd",endDate:"yyyyMMdd"}},g.pagination={pageSize:10,pageNum:1},g.sumObject={},g.queryBean={},g.queryBean.beginDate=new Date,g.queryBean.endDate=new Date,g.cached={BANK_INFO:{},BANK_CARD_TYPE:{},CONN_CHANNEL:{},TRANS_CODE_ALL:{},CLR_FLAG:{},CLR_TYPE:{},FEE_CLEAR_TYPE:{},COMANY_CODE:{}},r.initCache(g.cached),g.getCache=function(e){return r.getCache(e)},g.getObj=function(e,o){return t.post(config.ctx+"/base/cache/getAll",a({cacheKey:e})).then(function(e){return l(c(e.data.object,o),6)},function(e){n.error("获取数据%s失败",cacheKey)})},g.queryDetail=y,g.resetForm=d,g.redirectPayClearDay=p}]),angular.module("myApp").controller("PayFeeClearDayModalInstanceCtrl",["$scope","$uibModalInstance","modalItem","$http","dateFilter","$httpParamSerializerJQLike",function(e,t,a,n,o,i){function r(e,t){return 1==t&&1==c.detailFlag?void(c.detailFlag=!1):(c.detailFlag=!0,c.url=config.ctx+"/settlement/clear/detail/payClearDetail/redirectPaySettleDetail",c.postData={},c.postData.orgCode=e.orgCode,c.postData.settleDate=o(e.settleDate,"yyyyMMdd"),c.postData.pageSize=c.pagination.pageSize,c.postData.pageNum=c.pagination.pageNum,void n.post(c.url,i(c.postData)).then(function(t){var a=t.data;a.success?(c.pagination=a.object,c.sumObject=a.sumObject,c.queryBean=e):alert(a.msg)}))}function l(){r(c.queryBean,!1)}var c=e.vm={modalTitle:"please change the title",modalBody:"#",url:"",item:{}};c=e.vm=a,c.pagination={pageSize:10,pageNum:1},c.sumObject={},e.save=function(){},e.cancel=function(){t.dismiss("cancel")},c.redirectPaySettleDetail=r,c.queryDetail=l}]);