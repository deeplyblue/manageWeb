angular.module("myApp").controller("queryCtrl",["$scope","$http","$httpParamSerializerJQLike","$log","OpenService","CheckboxService","CacheService","myConstant",function(e,t,a,n,i,o,r,d){function u(){var e=document.getElementById("queryForm");m.url=angular.element(e).prop("action"),m.postData=m.queryBean,m.postData.pageSize=m.pagination.pageSize,m.postData.pageNum=m.pagination.pageNum,t.post(m.url,a(m.postData)).then(function(e){var t=e.data;t.success?(m.pagination=t.object,o.clearChecked()):alert(t.msg)})}function c(){m.queryBean={}}function l(e,t){o.updateChecked(e,t),n.debug(t),n.debug(o.getChecked())}function p(){i({modalTitle:"新增支付机构交易权限模板",modalBody:"toAdd",url:"add",item:{}},function(e){})}function g(){return 1!=o.getChecked().length?void alert("必须勾选一条记录！"):void i({modalTitle:"修改支付机构交易权限模板",modalBody:"toUpdate",url:"update",item:m.pagination.list.filter(function(e,t,a){return e.orgCode==o.getChecked()[0]})[0]})}function s(){return 1!=o.getChecked().length?void alert("必须勾选一条记录！"):void t.post("delete",a({userId:o.getChecked()[0]})).then(function(e){var t=e.data;if(t.success){var a=m.pagination.list.filter(function(e,t,a){return e.userId==o.getChecked()[0]})[0];m.pagination.list.splice(m.pagination.list.indexOf(a),1),alert("操作成功")}else alert("操作失败")},function(e){alert(e.statusText),n.debug("error")})}var m=e.vm={};m.constant=d,m.pagination={pageSize:10,pageNum:1},m.queryBean={},m.queryDetail=u,m.resetForm=c,m.updateChecked=l,m.addItem=p,m.updateItem=g,m.deleteItem=s,m.cached={CONN_CHANNEL:{},TRANS_CODE_ALL:{},REFUND_FLAG:{},USE_FLAG:{}},r.initCache(m.cached)}]);