angular.module("myApp").controller("queryCtrl",function(e,t,a,r,o,n,c,l,i,y){function d(){var e=document.getElementById("queryForm");g.url=angular.element(e).prop("action"),g.postData=g.queryBean,g.postData.pageSize=g.pagination.pageSize,g.postData.pageNum=g.pagination.pageNum,g.postData.sDateStart=l(g.queryBean.oDateStart,"yyyyMMdd"),g.postData.sDateEnd=l(g.queryBean.oDateEnd,"yyyyMMdd"),t.post(g.url,a(g.postData)).then(function(e){var t=e.data;t.success?(g.pagination=t.object,g.sumObject=t.sumObject,n.clearChecked()):alert(t.msg)})}function u(){g.queryBean={oDateStart:y.getYesterday(),oDateEnd:y.getYesterday()}}function s(e,r){t.post(config.ctx+"/report/gLCollectionReport/searchErrDetail",a({payOrgCode:e,sSettleDate:l(r,"yyyyMMdd")})).then(function(t){var a=t.data;if(a.success){var n=a.object;o({modalTitle:"差异明细查询",modalBody:config.ctx+"/report/gLCollectionReport/toSearchErrDetail",url:"searchErrDetail",item:{results:n,payOrgCode:e,sSettleDate:l(r,"yyyyMMdd")},cached:g.cached},function(e){},"QueryErrDetailModalInstanceCtrl","myModalNoSave.html")}else alert(a.msg)})}var g=e.vm={};g.constant=i,g.downCfg={contentType:"jqLike",date:{oDateStart:"yyyyMMdd",oDateEnd:"yyyyMMdd"}},g.pagination={pageSize:10,pageNum:1},g.queryBean={oDateStart:y.getYesterday(),oDateEnd:y.getYesterday()},g.validateOptions={blurTrig:!0,showError:function(e,t){},removeError:!0},g.queryDetail=d,g.resetForm=u,g.queryErrDetail=s,g.cached={BANK_INFO:{},COMANY_CODE:{},MERCHANT_CODE:{}},c.initCache(g.cached),g.getCache=function(e){return c.getCache(e)},g.getObj=function(e,o){return t.post(config.ctx+"/base/cache/getAll",a({cacheKey:e})).then(function(e){return limitToFilter(filterFilter(e.data.object,o),6)},function(e){r.error("获取数据%s失败",cacheKey)})}}),angular.module("myApp").controller("QueryErrDetailModalInstanceCtrl",function(e,t,a,r,o){var n=e.vm={modalTitle:"please change the title",modalBody:"#",url:"",item:{}};n=e.vm=a,e.cancel=function(){t.dismiss("cancel")}});