angular.module("myApp").controller("queryCtrl",function(e,t,a,r,o,n,c,i,l,y){function u(){var e=document.getElementById("queryForm");p.url=angular.element(e).prop("action"),p.postData=p.queryBean,p.postData.pageSize=p.pagination.pageSize,p.postData.pageNum=p.pagination.pageNum,p.postData.sDateStart=i(p.queryBean.oDateStart,"yyyyMMdd"),p.postData.sDateEnd=i(p.queryBean.oDateEnd,"yyyyMMdd"),t.post(p.url,a(p.postData)).then(function(e){var t=e.data;t.success?(p.pagination=t.object,p.sumObject=t.sumObject,n.clearChecked()):alert(t.msg)})}function d(){p.queryBean={oDateStart:y.getYesterday(),oDateEnd:y.getYesterday()}}function s(e,r){t.post(config.ctx+"/report/payBusiCheckReport/searchErrDetail",a({payOrgCode:e,sSettleDate:i(r,"yyyyMMdd")})).then(function(t){var a=t.data;if(a.success){var n=a.object;o({modalTitle:"差异明细查询",modalBody:config.ctx+"/report/payBusiCheckReport/toSearchErrDetail",url:"searchErrDetail",item:{results:n,payOrgCode:e,sSettleDate:i(r,"yyyyMMdd")},cached:p.cached},function(e){},"QueryErrDetailModalInstanceCtrl","myModalNoSave.html")}else alert(a.msg)})}var p=e.vm={};p.constant=l,p.downCfg={contentType:"jqLike",date:{oDateStart:"yyyyMMdd",oDateEnd:"yyyyMMdd"}},p.pagination={pageSize:10,pageNum:1},p.queryBean={oDateStart:y.getYesterday(),oDateEnd:y.getYesterday()},p.validateOptions={blurTrig:!0,showError:function(e,t){},removeError:!0},p.queryDetail=u,p.resetForm=d,p.queryErrDetail=s,p.cached={BANK_INFO:{},COMANY_CODE:{},MERCHANT_CODE:{}},c.initCache(p.cached),p.getCache=function(e){return c.getCache(e)},p.getObj=function(e,o){return t.post(config.ctx+"/base/cache/getAll",a({cacheKey:e})).then(function(e){return limitToFilter(filterFilter(e.data.object,o),6)},function(e){r.error("获取数据%s失败",cacheKey)})}}),angular.module("myApp").controller("QueryErrDetailModalInstanceCtrl",function(e,t,a,r,o){var n=e.vm={modalTitle:"please change the title",modalBody:"#",url:"",item:{}};n=e.vm=a,e.cancel=function(){t.dismiss("cancel")}});