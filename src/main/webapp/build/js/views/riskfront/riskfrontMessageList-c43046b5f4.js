angular.module("myApp").controller("queryCtrl",function(e,t,a,o,n,c,r,s,T,u){function i(){var e=document.getElementById("queryForm");m.url=e.getAttribute("action"),m.pagination.queryBean=m.queryBean,m.pagination.list=null;var a=m.pagination;t.post(m.url,a,config.jsonHeader).then(function(e){var t=e.data;t.success?m.pagination=t.object:alert(t.msg)})}function d(){m.queryBean={}}function R(e,t){c.updateChecked(e,t),o.debug(t),o.debug(c.getChecked())}function l(e){var t=e;n({modalTitle:"查看明细",modalBody:"toDetail",url:"#",item:t,cached:{RISKFRONT_STATUS:m.cached.RISKFRONT_STATUS,RISKFRONT_DEAL_STATUS:m.cached.RISKFRONT_DEAL_STATUS,RISKFRONT_TX_CODE:m.cached.RISKFRONT_TX_CODE,RISKFRONT_TYPE:m.cached.RISKFRONT_TYPE,RISKFRONT_DATA_TYPE:m.cached.RISKFRONT_DATA_TYPE,RISKFRONT_SUBJECT_TYPE:m.cached.RISKFRONT_SUBJECT_TYPE,RISKFRONT_ID_TYPE:m.cached.RISKFRONT_ID_TYPE,RISKFRONT_CASETYPE:m.cached.RISKFRONT_CASETYPE}},function(e){},"","myModalNoSave.html")}function g(e){var c=angular.copy(e);m.url=config.ctx+"/riskfront/messageList/MessageLog",t.post(m.url,a(c)).then(function(e){var t=e.data;if(t.success){var a=t.object;o.debug(a),n({modalTitle:"处理日志查询",modalBody:"toMessageLog",url:"#",item:a,cached:{}},function(){},"","myModalNoFooter.html")}else alert(t.msg)})}function S(e){m.strs=new Array;var c=angular.copy(e);m.url=config.ctx+"/riskfront/messageList/toMessage",t.post(m.url,a(c)).then(function(e){var t=e.data;t.success?(m.message=t.object,m.strs=m.message.respMessage.split("\n"),o.debug(m.strs),n({modalTitle:"结果报文",modalBody:"toResult",url:"#",item:{reMessage:m.strs},cached:{}},function(){},"","myModalNoFooter.html")):alert(t.msg)})}function _(e){o.debug(e),location.href=config.ctx+"/riskfront/messageList/downEnclosure?id="+e.msgId}var m=e.vm={};m.constant=s,m.pagination={pageSize:10,pageNum:1},m.queryBean={},m.queryBean.startDate=u.getToday(),m.queryBean.endDate=u.getToday(),m.queryDetail=i,m.resetForm=d,m.updateChecked=R,m.queryCustomerDetail=l,m.toMessage=S,m.downEnclosure=_,m.queryMessageLog=g,m.cached={RISKFRONT_STATUS:{},RISKFRONT_DEAL_STATUS:{},RISKFRONT_TX_CODE:{},RISKFRONT_TYPE:{},RISKFRONT_DATA_TYPE:{},RISKFRONT_SUBJECT_TYPE:{},RISKFRONT_ID_TYPE:{},RISKFRONT_CASETYPE:{}},r.initCache(m.cached),m.getCache=function(e){return r.getCache(e)}});