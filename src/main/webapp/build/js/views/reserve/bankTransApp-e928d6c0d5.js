angular.module("myApp").controller("queryCtrl",["$scope","$http","$httpParamSerializerJQLike","$log","OpenService","CheckboxService","CacheService","limitToFilter","filterFilter","dateFilter","myConstant",function(e,n,t,a,c,r,o,i,s,u,p){function l(){E.cached.RESERVE_LIST=[];for(var e in E.cached.RESERVE_INFO)E.cached.RESERVE_LIST.push({accountNo:e,bankCode:E.cached.RESERVE_INFO[e].bankCode,desc:E.cached.RESERVE_INFO[e].description})}function g(){var e=document.getElementById("queryForm");E.url=angular.element(e).prop("action");var t=angular.copy(E.queryBean);t.pageSize=E.pagination.pageSize,t.pageNum=E.pagination.pageNum;var a={headers:{"Content-Type":"application/json"}};n.post(E.url,t,a).then(function(e){var n=e.data;n.success?(E.pagination=n.object,r.clearChecked()):alert(n.msg)})}function d(){E.queryBean={}}function h(e){a.debug("-------"+JSON.stringify(e));var t={headers:{"Content-Type":"application/json"}};n.post(config.ctx+"/bank/trans/down/delete",e,t).then(function(n){var t=n.data;t.success?(E.pagination.list.splice(E.pagination.list.indexOf(e),1),alert("操作成功")):alert(t.msg)})}var E=e.vm={};E.constant=p,E.pagination={pageSize:10,pageNum:1},E.queryBean={},E.cached={RESERVE_LIST:{},RESERVE_INFO:{}},function(){E.queryBean={},n.post(config.ctx+"/reserve/info/init/reserve",{},config.jsonHeader).then(function(e){e.data.success?(E.cached.RESERVE_INFO=e.data.object,l()):a.error("获取数据%s失败",e.data.msg)},function(e){a.error("获取数据%s失败",cacheKey)})}(),E.getCache=function(e){return o.getCache(e)},E.getObj=function(e,c){return n.post(config.ctx+"/base/cache/getAll",t({cacheKey:e})).then(function(e){return i(s(e.data.object,c),6)},function(e){a.error("获取数据%s失败",cacheKey)})},E.queryDetail=g,E.resetForm=d,E.resetItem=h}]);