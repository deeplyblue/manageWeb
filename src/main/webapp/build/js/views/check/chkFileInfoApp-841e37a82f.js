angular.module("myApp").controller("queryCtrl",["$scope","$http","$httpParamSerializerJQLike","$log","OpenService","CheckboxService","CacheService","dateFilter","myConstant","DateCalculateService",function(e,t,a,n,r,c,o,i,l,u){function s(){var e=document.getElementById("queryForm");y.url=angular.element(e).prop("action"),y.postData=y.queryBean,y.postData.pageSize=y.pagination.pageSize,y.postData.pageNum=y.pagination.pageNum,y.postData.sSettleDateStart=i(y.queryBean.settleDateStart,"yyyyMMdd"),y.postData.sSettleDateEnd=i(y.queryBean.settleDateEnd,"yyyyMMdd"),t.post(y.url,a(y.postData)).then(function(e){var t=e.data;t.success?(y.pagination=t.object,c.clearChecked()):alert(t.msg)})}function p(){y.queryBean={settleDateStart:u.getYesterday(),settleDateEnd:u.getToday()}}var y=e.vm={};y.constant=l,y.pagination={pageSize:10,pageNum:1},y.queryBean={settleDateStart:u.getYesterday(),settleDateEnd:u.getToday()},y.cached={ALL_COMPANY_CODE:{}},o.initCache(y.cached),y.getCache=function(e){return o.getCache(e)},y.getObj=function(e,r){return t.post(config.ctx+"/base/cache/getAll",a({cacheKey:e})).then(function(e){return limitToFilter(filterFilter(e.data.object,r),6)},function(e){n.error("获取数据%s失败",cacheKey)})},y.queryDetail=s,y.resetForm=p}]);