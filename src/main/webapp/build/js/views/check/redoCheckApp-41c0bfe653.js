angular.module("myApp").controller("queryCtrl",["$scope","$http","$httpParamSerializerJQLike","$log","OpenService","CheckboxService","CacheService","dateFilter","myConstant",function(e,t,r,a,o,n,c,s,u){function l(){D.queryBean={}}function y(){confirm("是否确认此操作?")&&t.post("rollBackDownloadAndChkData",r({orgCode:D.queryBean.orgCode,settleDate:s(D.queryBean.settleDate,"yyyyMMdd")})).then(function(e){var t=e.data;t.success?alert(t.object):alert(t.msg)},function(e){alert(e.statusText),a.debug("error")})}function d(){confirm("是否确认此操作?")&&t.post("rollBackChkData",r({orgCode:D.queryBean.orgCode,settleDate:s(D.queryBean.settleDate,"yyyyMMdd")})).then(function(e){var t=e.data;t.success?alert(t.object):alert(t.msg)},function(e){alert(e.statusText),a.debug("error")})}function i(){confirm("是否确认此操作?")&&t.post("startDownload",r({orgCode:D.queryBean.orgCode,settleDate:s(D.queryBean.settleDate,"yyyyMMdd")})).then(function(e){var t=e.data;t.success?alert(t.object):alert(t.msg)},function(e){alert(e.statusText),a.debug("error")})}function f(){confirm("是否确认此操作?")&&t.post("startCheck",r({orgCode:D.queryBean.orgCode,settleDate:s(D.queryBean.settleDate,"yyyyMMdd")})).then(function(e){var t=e.data;t.success?alert(t.object):alert(t.msg)},function(e){alert(e.statusText),a.debug("error")})}function C(){confirm("是否确认此操作?")&&t.post("startForceCheck",r({orgCode:D.queryBean.orgCode,settleDate:s(D.queryBean.settleDate,"yyyyMMdd")})).then(function(e){var t=e.data;t.success?alert(t.object):alert(t.msg)},function(e){alert(e.statusText),a.debug("error")})}function g(){confirm("是否确认此操作?")&&t.post("startInnerCheck",r({orgCode:D.queryBean.orgCode,settleDate:s(D.queryBean.settleDate,"yyyyMMdd")})).then(function(e){var t=e.data;t.success?alert(t.object):alert(t.msg)},function(e){alert(e.statusText),a.debug("error")})}function h(){confirm("是否确认此操作?")&&t.post("startChkFileCreate",r({orgCode:D.queryBean.orgCode,settleDate:s(D.queryBean.settleDate,"yyyyMMdd")})).then(function(e){var t=e.data;t.success?alert(t.object):alert(t.msg)},function(e){alert(e.statusText),a.debug("error")})}function m(){confirm("是否确认此操作?")&&t.post("countBankChkComplete",r({settleDate:s(D.queryBean.settleDate,"yyyyMMdd")})).then(function(e){var t=e.data;t.success?alert(t.object):alert(t.msg)},function(e){alert(e.statusText),a.debug("error")})}var D=e.vm={};D.constant=u,D.queryBean={},D.resetForm=l,D.datepicker={dateOptions:{formatYear:"yy",startingDay:1,formatDayTitle:"yyyy MMMM"}},D.resetForm=l,D.rollBackDownloadAndChkData=y,D.rollBackChkData=d,D.startDownload=i,D.startCheck=f,D.startForceCheck=C,D.startInnerCheck=g,D.startChkFileCreate=h,D.countBankChkComplete=m,D.cached={ALL_COMPANY_CODE:{}},c.initCache(D.cached),D.getCache=function(e){return c.getCache(e)},D.getObj=function(e,o){return t.post(config.ctx+"/base/cache/getAll",r({cacheKey:e})).then(function(e){return limitToFilter(filterFilter(e.data.object,o),6)},function(e){a.error("获取数据%s失败",cacheKey)})}}]);